<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>hraine_IVANTUS</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- –§–æ–Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ (YouTube –±–µ–∑ –∑–≤—É–∫–∞). –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ API-–ø–ª–µ–µ—Ä, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è -->
  <div class="bg-video-wrapper" aria-hidden="true">
    <div id="yt-bg-player" class="bg-video-iframe" aria-hidden="true"></div>
    <div id="videoError" class="video-error" style="display:none;" role="alert">–û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ–ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—è. –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —Å–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.</div>
  </div>

  <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∑–≤—É–∫–∞ —É–¥–∞–ª—ë–Ω –ø–æ –∑–∞–ø—Ä–æ—Å—É -->

  <div class="center">
    <h1>
      <div class="title-line">–ò–í–ê–ù –®–ï–†–ï–ú–ï–¢</div>
      <div class="subtitle-line">–î–ï–î –ò–ù–°–ê–ô–î</div>
    </h1>
  </div>

  <!-- –õ–æ–∫–∞–ª—å–Ω—ã–π –∞—É–¥–∏–æ—Ñ–∞–π–ª (–ø–æ–ª–æ–∂–∏—Ç–µ —Å—é–¥–∞ –≤–∞—à MP3: assets/unravel.mp3) -->
  <audio id="bgAudio" src="assets/unravel.mp3" preload="auto"></audio>

  <!-- –ù–µ–±–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤—É–∫–æ–º (–≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É) -->
  <button id="audioToggle" class="audio-toggle" aria-pressed="false" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">üîà</button>

  <!-- YouTube fallback: —É–∫–∞–∂–∏—Ç–µ ID –≤–∏–¥–µ–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ytVideoId –≤–Ω–∏–∑—É (–æ–ø—Ü–∏—è) -->
  <div id="ytWrapper" style="display:none">
    <iframe id="ytPlayer" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>

  <script>
    const audio = document.getElementById('bgAudio');
    const ytVideoId = ''; // –í—Å—Ç–∞–≤—å—Ç–µ YouTube video ID –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ YouTube

    function tryAutoplay() {
      if (audio && audio.src) {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: muted=true —á—Ç–æ–±—ã –±—Ä–∞—É–∑–µ—Ä –ø–æ–∑–≤–æ–ª–∏–ª autoplay,
        // –∏ volume=0.5 –∫–∞–∫ —Ü–µ–ª–µ–≤—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å –ø–æ—Å–ª–µ —Ä–∞–∑–º—É—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        try{ audio.muted = true; audio.volume = 0.5; }catch(e){}
        // –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è autoplay –≤ muted —Å–æ—Å—Ç–æ—è–Ω–∏–∏
        audio.play().then(()=>{
          // autoplay succeeded but –≤—Å—ë –µ—â—ë muted ‚Äî –∂–¥—ë–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á—Ç–æ–±—ã —Ä–∞–∑–º—É—Ç–∏—Ç—å
          updateAudioButtonState();
        }).catch(()=>{
          // –∞–≤—Ç–æ–ø–ª–µ–π –Ω–µ —É–¥–∞–ª—Å—è ‚Äî –∂–¥—ë–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
          updateAudioButtonState();
        });
      } else if (ytVideoId) {
        const iframe = document.getElementById('ytPlayer');
        iframe.src = `https://www.youtube.com/embed/afV8i-mN9yU?autoplay=1&controls=0&rel=0`;
        document.getElementById('ytWrapper').style.display = 'block';
      }
    }

    window.addEventListener('load', tryAutoplay);

    // –ï—Å–ª–∏ –∞–≤—Ç–æ–ø–ª–µ–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ø–æ–ø—Ä–æ–±—É–µ–º –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –ø–ª–∞–≤–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –¥–æ target –≤ ms
    function fadeInAudio(targetVolume = 0.5, duration = 800){
      if (!audio) return;
      try{
        audio.muted = false;
      }catch(e){}
      const start = audio.volume || 0;
      const delta = targetVolume - start;
      const steps = 20;
      const stepTime = duration / steps;
      let current = 0;
      const iv = setInterval(()=>{
        current++;
        const v = start + (delta * (current/steps));
        try{ audio.volume = Math.max(0, Math.min(1, v)); }catch(e){}
        if (current >= steps){ clearInterval(iv); }
      }, stepTime);
    }

    function attemptPlayOnInteraction(){
      if (!audio) return;
      // –µ—Å–ª–∏ –∞—É–¥–∏–æ –µ—â—ë –Ω–µ –∏–≥—Ä–∞–µ—Ç, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å
      audio.play().catch(()=>{});
      // –ø–ª–∞–≤–Ω–æ —Ä–∞–∑–º—É—Ç–∏—Ç—å –∏ –ø–æ–¥–Ω—è—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å
      fadeInAudio(0.5, 800);
      // –æ—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏
      window.removeEventListener('click', attemptPlayOnInteraction);
      window.removeEventListener('touchstart', attemptPlayOnInteraction);
      window.removeEventListener('keydown', attemptPlayOnInteraction);
    }
    window.addEventListener('click', attemptPlayOnInteraction);
    window.addEventListener('touchstart', attemptPlayOnInteraction);
    window.addEventListener('keydown', attemptPlayOnInteraction);

    // –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤—É–∫–æ–º
    const audioToggle = document.getElementById('audioToggle');
    function updateAudioButtonState(){
      if (!audioToggle) return;
      const isMuted = audio ? (audio.muted || audio.volume === 0) : true;
      audioToggle.textContent = isMuted ? 'üîà' : 'üîä';
      audioToggle.setAttribute('aria-pressed', String(!isMuted));
    }
    if (audioToggle){
      audioToggle.addEventListener('click', (e)=>{
        e.preventDefault();
        if (!audio) return;
        if (audio.muted || audio.volume === 0){
          fadeInAudio(0.5, 600);
        } else {
          try{ audio.volume = 0; audio.muted = true; }catch(e){}
        }
        updateAudioButtonState();
      });
    }

    // –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö
    if (audio){
      audio.addEventListener('play', updateAudioButtonState);
      audio.addEventListener('pause', updateAudioButtonState);
      audio.addEventListener('volumechange', updateAudioButtonState);
    }
  </script>

  <!-- YouTube IFrame API + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–ª–µ–µ—Ä–∞ -->
  <script>
    // —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–µ–µ—Ä–∞ (ms)
    const PLAYER_LOAD_TIMEOUT = 1000;
    let playerReady = false;
    let playerLoadTimer = null;

    function showVideoError() {
  const err = document.getElementById('videoError');
  if (err) err.style.display = 'block';
  // —Å–∫—Ä—ã–≤–∞–µ–º –≤–µ—Å—å wrapper —Å —Ñ–æ–Ω–æ–≤—ã–º –ø–ª–µ–µ—Ä–æ–º, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π bg (assets/bg.jpg)
  const wrapper = document.querySelector('.bg-video-wrapper');
  if (wrapper) wrapper.style.display = 'none';
    }

    // –∑–∞–≥—Ä—É–∂–∞–µ–º API –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
    (function loadYouTubeApi(){
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      tag.async = true;
      document.head.appendChild(tag);
    })();

    // –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è YouTube API –∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤
    function onYouTubeIframeAPIReady() {
      // –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–µ–µ—Ä–∞: –±–µ–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤ muted —Ä–µ–∂–∏–º–µ, loop —á–µ—Ä–µ–∑ playlist
      window.ytBgPlayer = new YT.Player('yt-bg-player', {
        videoId: 'afV8i-mN9yU',
        playerVars: {
          autoplay: 1,
          controls: 0,
          mute: 1,
          loop: 1,
          playlist: 'afV8i-mN9yU',
          modestbranding: 1,
          rel: 0
        },
        events: {
          onReady: function(event){
              playerReady = true;
              if (playerLoadTimer) clearTimeout(playerLoadTimer);
              // –µ—Å–ª–∏ —Ä–∞–Ω–µ–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –æ—à–∏–±–∫—É ‚Äî —Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Å—Ç–∞–≤–ª—è–µ–º –≤–∏–¥–µ–æ
              const err = document.getElementById('videoError');
              if (err) err.style.display = 'none';
              try{ event.target.mute(); event.target.playVideo(); }catch(e){}
            },
          onError: function(e){
            // –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è
            showVideoError();
            console.warn('YouTube player error', e);
          }
        }
      });

      // –µ—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ —Å—Ç–∞–ª –≥–æ—Ç–æ–≤ –∑–∞ –≤—Ä–µ–º—è —Ç–∞–π–º–∞—É—Ç–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
      playerLoadTimer = setTimeout(()=>{
        if (!playerReady) showVideoError();
      }, PLAYER_LOAD_TIMEOUT);
    }
  </script>
</body>
</html>
